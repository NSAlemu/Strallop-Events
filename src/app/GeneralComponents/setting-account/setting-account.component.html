<div class="px-lg-5 px-md-3">
  <div class="content-header mx-lg-3 my-4">
    <div class="d-flex mb-2 ">
      <h2>Account Info</h2>
    </div>
  </div>
  <mat-progress-bar *ngIf="loading" mode="indeterminate" color="primary"
                    style="position: sticky; top: 0; z-index: 100"></mat-progress-bar>
  <div class="wide-content" role="main">
    <mat-card style="background-color :#1b1d1e;">
      <form #loginGroup='ngForm' (ngSubmit)="loginGroup.valid  && updateProfile()" appPasswordMatchValidation>
        <h4>Profile Image</h4>
        <div class="col-auto p-2" style="cursor:pointer;">
          <app-event-image-upload [(file)]="coverImageFile" [(background)]="coverImageUrl"
                                  [size]=200></app-event-image-upload>
        </div>
      </form>
      <form #profileFormGroup='ngForm' (submit)="profileFormGroup.valid && updateProfile()">
      <div class="col-lg-7 col-md-12">
        <h4 style="margin-top: 60px; margin-bottom: 15px">Profile Information</h4>
        <div class="mt-2 row">
          <div>
            <mat-form-field appearance="outline" class="w-100">
              <mat-icon matPrefix class="align-items-end d-flex" style="font-size: large; margin-right: 5px">
                badgename
              </mat-icon>
              <input matInput #name="ngModel" required name="name" [(ngModel)]="thisUser.name" placeholder="Name">
              <mat-hint *ngIf="(name.invalid && (name.dirty || name.touched)) && name.errors?.required">
                Name is required.
              </mat-hint>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field appearance="outline" class="w-100">
              <mat-icon matPrefix class="align-items-end d-flex" style="font-size: large; margin-right: 5px">
                account_circle
              </mat-icon>
              <input matInput #username="ngModel" minlength="6" required name="username" placeholder="Username"
                     [(ngModel)]="thisUser.username">
              <mat-hint
                *ngIf="(username.invalid && (username.dirty || username.touched)) && username.errors?.minlength">
                Username must be at least 6 characters long.
              </mat-hint>
              <mat-hint
                *ngIf="(username.invalid && (username.dirty || username.touched)) && username.errors?.required">
                Username is required.
              </mat-hint>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field appearance="outline">
              <mat-icon matPrefix class="align-items-end d-flex" style="font-size: large; margin-right: 5px">email
              </mat-icon>
              <input matInput #email="ngModel" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" type="email"
                     name="email" placeholder="Email" [(ngModel)]="thisUser.email">
              <mat-hint *ngIf="(email.invalid && (email.dirty || email.touched)) && email.errors?.pattern">
                Email is not valid.
              </mat-hint>
              <mat-hint *ngIf="(email.invalid && (email.dirty || email.touched)) && email.errors?.required">
                Email is required.
              </mat-hint>
            </mat-form-field>
          </div>
          <div>
            <mat-form-field class="w-100" appearance="outline">
              <mat-icon matPrefix class="align-items-end d-flex" style="font-size: large; margin-right: 5px">phone
              </mat-icon>
              <input type="number" pattern="^[1-9]\d*$" matInput #phoneNumber='ngModel' name="phoneNumber" placeholder="Phone Number"
                     [(ngModel)]="thisUser.phoneNumber">
              <mat-hint
                *ngIf="!((phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)) && phoneNumber.errors?.pattern)">
                Optional
              </mat-hint>
              <mat-hint
                *ngIf="(phoneNumber.invalid && (phoneNumber.dirty || phoneNumber.touched)) && phoneNumber.errors?.pattern">
                Phone number can only contain numbers.
              </mat-hint>
            </mat-form-field>
          </div>
        </div>
        <div class="d-flex justify-content-end">
          <div class="mt-5">
            <button mat-raised-button color="primary" class="big-action-button">Update Profile</button>
          </div>
        </div>
      </div>
      </form>

    </mat-card>
  </div>
</div>
